<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Nebenkosten Helper</title>

    <link rel="stylesheet" href="../../assets/css/materialize.min.css">
    <link rel="stylesheet" href="../../assets/css/index.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="../../node_modules/chart.js/dist/Chart.min.js"></script>
</head>

<body>
    <!-- Tabs -->
    <div class="row page">
        <div id="tabRow" class="col s12">
            <ul class="tabs z-depth-1">
                <li class="tab col s4 grey darken-4"><a class="white-text" href="#data">Zählerstände</a></li>
                <li class="tab col s4 grey darken-4"><a class="active white-text" href="#dashboard">Dashboard</a></li>
                <li class="tab col s4 grey darken-4"><a class="white-text" href="#finanzen">Finanzstatus</a></li>
            </ul>
        </div>

        <!-- Data Tab -->
        <div id="data" class="col s12 tabContent">

            <div class="sidebar-left div-border z-depth-2 center">
                <h6><span class="teal-text lighten-2 bold">Zählerstände</span></h6>
                <table>
                    <thead>
                        <th>Art</th>
                        <th>Anzahl Einträge</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Wasser</td>
                            <td id="countWater"></td>
                        </tr>
                        <tr>
                            <td>Strom</td>
                            <td id="countPower"></td>
                        </tr>
                        <tr>
                            <td>Gas</td>
                            <td id="countGas"></td>
                        </tr>
                    </tbody>
                </table>
                <!--
                <br>
                <hr>
                <h6><span class="bold teal-text lighten-2">Filter</span></h6>
                -->
            </div>

            <div id="tableContainer">
                <ul class="collapsible expandable">
                    <!-- Wasser Tabelle -->
                    <li>
                        <div class="collapsible-header teal lighten-2 white-text">
                            <h5><i class="material-icons white-text">keyboard_arrow_down</i></h5>
                            <h5><i class="large material-icons">invert_colors</i>Wasser</h5>
                        </div>
                        <div class="collapsible-body tableContainer">
                            <table class="striped centered">
                                <thead class="thead-border">
                                    <tr>
                                        <th>Zählernummer</th>
                                        <th>Datum</th>
                                        <th>Verbrauch</th>
                                        <th>Preis pro Einheit</th>
                                        <!--<th></th>-->
                                    </tr>
                                </thead>
                                <tbody id="tbodyWasser">
                                </tbody>
                            </table>
                        </div>
                    </li>

                    <!-- Strom Tabelle -->
                    <li>
                        <div class="collapsible-header teal lighten-2 white-text">
                            <h5><i class="material-icons white-text">keyboard_arrow_down</i></h5>
                            <h5 class="white-text">
                                <i class="large material-icons">power</i>
                                Strom
                            </h5>
                        </div>
                        <div class="collapsible-body tableContainer z-depth-1">

                            <table class="striped centered">
                                <thead class="thead-border">
                                    <tr>
                                        <th>Zählernummer</th>
                                        <th>Datum</th>
                                        <th>Verbrauch</th>
                                        <th>Preis pro Einheit</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyStrom">
                                </tbody>
                            </table>
                        </div>
                    </li>

                    <!-- Gas Tabelle -->
                    <li>
                        <div class="collapsible-header teal lighten-2 white-text">
                            <h5><i class="material-icons white-text">keyboard_arrow_down</i></h5>
                            <h5 class="white-text"><i class="large material-icons">cloud</i>Gas</h5>
                        </div>
                        <div class="collapsible-body tableContainer z-depth-1">

                            <table class="striped centered">
                                <thead class="thead-border">
                                    <tr>
                                        <th>Zählernummer</th>
                                        <th>Datum</th>
                                        <th>Verbrauch</th>
                                        <th>Preis pro Einheit</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyGas">
                                </tbody>
                            </table>
                        </div>
                    </li>

                </ul>
            </div>

            <!--Floating Action Button-->
            <div class="fixed-action-btn">
                <a class="btn-floating btn-large teal lighten-2 z-depth-2">
                    <i class="large material-icons">menu</i>
                </a>
                <ul>
                    <li>
                        <a href="#modalAddEntry" nnid="addEntry" class="btn-floating floating-acc-btn modal-trigger"><i
                                class="material-icons">add</i></a>
                        <a class="btn-floating mobile-fab-tip">Neuen Zählerstand eintragen</a>
                    </li>
                    <li>
                        <a id="unfoldAllCollapsibleTable" class="btn-floating floating-acc-btn"><i class="material-icons">unfold_more</i></a>
                        <a class="btn-floating mobile-fab-tip">Alles aufklappen</a>
                    </li>
                    <li>
                        <a id="closeAllCollapsibleTable" class="btn-floating floating-acc-btn lighten-1"><i class="material-icons">unfold_less</i></a>
                        <a class="btn-floating mobile-fab-tip">Alles schließen</a>
                    </li>
                </ul>
            </div>

        </div>

        <!-- Dashboard Tab content-->
        <div id="dashboard" class="col s12 tabContent">
            <div class="container">
                <h4>Wasser</h4>
                <canvas id="wasserChart"></canvas>
            </div>

            <div class="container">
                <h4>Strom</h4>
                <canvas id="stromChart"></canvas>
            </div>

            <div class="container">
                <h4>Gas</h4>
                <canvas id="gasChart"></canvas>
            </div>
        </div>

        <div id="finanzen" class="col s12 tabContent">
            <!-- Left bar -->
            <div class="sidebar-left div-border z-depth-2 center">
                <h6><b><span class="teal-text lighten-2">Abrechnungsperiode</span></b></h6>
                <div class="input-field">
                    <label for="zeitraumVon" class="black-text">Von:</label>
                    <input id="zeitraumVon" type="text" class="datepicker">
                </div>
                <div class="input-field">
                    <label for="zeitraumBis" class="black-text">Bis:</label>
                    <input id="zeitraumBis" type="text" class="datepicker">
                </div>
                <br>
                <h6><span class="teal-text lighten-2 bold">Zähler auswählen</span></h6>

                <label for="selectCounterWater" class="black-text">Wasserzähler</label>
                <select id="selectCounterWater">
                    <option value="" disable selected>Wähle deine Option</option>
                </select>

                <div>
                    <label for="selectCounterPower" class="black-text">Stromzähler</label>
                    <select id="selectCounterPower">
                        <option disable selected>Wähle deine Option</option>
                    </select>
                </div>

                <label for="selectCounterGas" class="black-text">Gaszähler</label>
                <select id="selectCounterGas">
                    <option value="" disable selected>Wähle deine Option</option>
                </select>
                <br>
                <button id="selectPeriod" class="btn-small teal lighten-2 waves-effect waves-light">Auswählen</button>
                <br>
                <br>
                <hr>
                <h6><b><span class="teal-text lighten-2">Abrechnungsperiode<br>Anzahl Tage</span></b></h6>
                <h6 id="periodLength" class="bold">0</h6>
            </div>
            <!-- Main -->
            <div id="finanzenMain" class="blur">
                <ul class="collapsible expandable z-depth-1">
                    <!--Wasser-->
                    <li>
                        <div class="collapsible-header teal lighten-2 white-text valign-wrapper">
                            <h5><i class="material-icons white-text">keyboard_arrow_down</i></h5>
                            <h5><i class="large material-icons">invert_colors</i>Wasser</h5>
                        </div>
                        <div class="collapsible-body">

                            <!--Brauchwasser-->
                            <div id="brauchwasser">
                                <!--Verbrauch-->
                                <h5><span class="underline-text-teal">Brauchwasser Verbrauch</span></h5>
                                <div class="values-inline">
                                    <h6>Gesamter Verbrauch in [m³]:</h6>
                                    <h6 id="volumeWater" class="bold">0</h6>
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Preis [€] / [m³]:</h6>
                                    <h6 id="priceWater" class="bold">0</h6>
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Verbrauch [m³] / Tag:</h6>
                                    <h6 id="avgVolumeWater" class="bold">0</h6>
                                </div>
                                <hr>
                                <h6>Gebühr Verbrauch</h6>
                                <h6 id="feeUseWater" class="gebühr"></h6>
                                <br>
                                <br>

                                <!--Grungebühr-->
                                <h5><span class="underline-text-teal">Brauchwasser Grundgebühr</span></h5>
                                <div class="values-inline">
                                    <h6>Jahresgrundgebühr [€]:</h6>
                                    <input id="useWaterBaseFee" class="input-short center-align" type="number">
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Grundgebühr [€] / Tag:</h6>
                                    <h6 id="avgBaseFee" class="bold">0</h6>
                                </div>
                                <hr>
                                <div>
                                    <h6>Anteilige Grundgebühr für Abrechnungsperiode:</h6>
                                    <h6 id="baseFee" class="gebühr">0</h6>
                                </div>
                                <br>
                                <br>

                                <h5>Summe Brauchwassergebühren</h5>
                                <hr>
                                <!--Nettosumme-->
                                <div class="values-inline">
                                    <h6>Brauchwassergebühr Netto:</h6>
                                    <h6 id="netUseWater" class="bold">0</h6>
                                </div>
                                <!--USt-->
                                <div class="values-inline">
                                    <h6>Umsatzsteuer 7%:</h6>
                                    <h6 id="taxUseWater" class="bold">0</h6>
                                </div>
                                <!--Bruttosumme-->
                                <hr>
                                <h6>Brutto Brauchwassergebühr</h6>
                                <h6 id="grossUseWater" class="final-gebühr"></h6>
                            </div>
                            <br>
                            <br>

                            <!--Drain Water-->
                            <div id="abwasser">
                                <h5><span class="underline-text-teal">Abwasser</span></h5>
                                <div class="values-inline">
                                    <h6>Preis pro [m³]:</h6>
                                    <input id="priceDrainWater" class="input-short center-align" type="number">
                                </div>
                                <hr>
                                <h6>Gebühr Abwasser</h6>
                                <h6 id="feeDrainWater" class="gebühr"></h6>
                            </div>
                            <br>
                            <br>

                            <!--Rain water-->
                            <div id="niederschlagwasser">
                                <h5><span class="underline-text-teal">Niederschlagwasser</span></h5>
                                <div class="values-inline">
                                    <h6>Niederschlagsfläche [m²]:</h6>
                                    <input id="rainWaterArea" class="input-short center-align" type="number">
                                </div>
                                <div class="values-inline">
                                    <h6>Preis [€] / [m²]:</h6>
                                    <input id="rainWaterPrice" class="input-short center-align" type="number">
                                </div>
                                <hr>
                                <h6>Gebühr Niederschlagwasser</h6>
                                <h6 id="feeRainWater" class="gebühr"></h6>
                            </div>
                            <br>
                            <br>

                            <!-- Sum of water costs -->
                            <div>
                                <h5><span class="underline-text-teal">Summe Wasserkosten</span></h5>
                                <br>
                                <h5 id="totalFeeWater" class="final-gebühr"></h5>
                            </div>

                        </div>
                    </li>

                    <!--Strom-->
                    <li>
                        <div class="collapsible-header teal lighten-2 valign-wrapper">
                            <h5><i class="material-icons white-text">keyboard_arrow_down</i></h5>
                            <h5 class="white-text">
                                <i class="large material-icons">power</i>
                                Strom
                            </h5>
                        </div>
                        <div class="collapsible-body">
                            <!--Stromverbrauch-->
                            <div>
                                <h5><span class="underline-text-teal">Stromverbrauch</span></h5>
                                <div class="values-inline">
                                    <h6>Gesamter Verbrauch in [kWh]:</h6>
                                    <h6 id="volumePower" class="bold">0</h6>
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Preis [€] / [kWh]:</h6>
                                    <h6 id="pricePower" class="bold">0</h6>
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Verbrauch [kWh] / Tag:</h6>
                                    <h6 id="avgVolumePower" class="bold">0</h6>
                                </div>
                                <hr>
                                <h6>Gebühr Verbrauch</h6>
                                <h6 id="feeUsePower" class="gebühr"></h6>
                            </div>
                            <br>
                            <br>

                            <!--Stromsteuer-->
                            <div>
                                <h5><span class="underline-text-teal">Stromsteuer</span></h5>
                                <div class="values-inline">
                                    <h6>Stromsteuer [€] pro [kWh]:</h6>
                                    <input id="taxPerPower" class="input-short center-align" type="number">
                                </div>
                                <hr>
                                <h6>Stromsteuergebühr</h6>
                                <h6 id="feeTaxPower" class="gebühr"></h6>
                            </div>
                            <br>
                            <br>

                            <!--Servicepauschale-->
                            <div>
                                <h5><span class="underline-text-teal">Servicepauschale</span></h5>
                                <div class="values-inline">
                                    <h6>Servicepauschale [€]:</h6>
                                    <input id="serviceFlat" class="input-short center-align" type="number">
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Servicepauschale [€] / Tag:</h6>
                                    <h6 id="avgServiceFlat" class="bold">0</h6>
                                </div>
                                <hr>
                                <div>
                                    <h6>Anteilige Servicepauschale für Abrechnungsperiode:</h6>
                                    <h6 id="feeServiceFlat" class="gebühr">0</h6>
                                </div>
                            </div>
                            <br>
                            <br>

                            <!--Summe Stromkosten-->
                            <div>
                                <h5>Summe Stromgebühren</h5>
                                <hr>
                                <!--Nettosumme-->
                                <div class="values-inline">
                                    <h6>Stromgebühren Netto:</h6>
                                    <h6 id="netPower" class="bold">0</h6>
                                </div>
                                <!--USt-->
                                <div class="values-inline">
                                    <h6>Umsatzsteuer 19%:</h6>
                                    <h6 id="taxPower" class="bold">0</h6>
                                </div>
                                <!--Bruttosumme-->
                                <hr>
                                <h6>Brutto Stromgebühren</h6>
                                <h6 id="grossPower" class="final-gebühr"></h6>
                            </div>
                        </div>
                    </li>

                    <!--Gas-->
                    <li>
                        <div class="collapsible-header teal lighten-2  valign-wrapper">
                            <h5><i class="material-icons white-text">keyboard_arrow_down</i></h5>
                            <h5 class="white-text"><i class="large material-icons">cloud</i>Gas</h5>
                        </div>
                        <div id="gasFinanzen" class="collapsible-body z-depth-1 active">

                            <!--Arbeitspreis-->
                            <div>
                                <h5><span class="underline-text-teal">Arbeitspreis</span></h5>
                                <div class="values-inline">
                                    <h6>Gasverbrauch in [m³]:</h6>
                                    <h6 id="volumeGas" class="bold"></h6>
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Gasverbrauch [m³] / Tag:</h6>
                                    <h6 id="avgVolumeGas" class="bold"></h6>
                                </div>
                                <div class="values-inline">
                                    <h6>Zustandszahl:</h6>
                                    <input id="stateNum" class="input-short center-align" type="number">
                                </div>
                                <div class="values-inline">
                                    <h6>Brennwert:</h6>
                                    <input id="burnValue" class="input-short center-align" type="number">
                                </div>
                                <div class="values-inline">
                                    <h6>Energie [kWh] berechnet aus Gasvolumen:</h6>
                                    <h6 id="calcVolumeGas" class="bold" 0></h6>
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Preis [€] / [kWh]:</h6>
                                    <h6 id="priceGas" class="bold"></h6>
                                </div>
                                <hr>
                                <h6>Arbeitspreisgebühr</h6>
                                <h6 id="feeUseGas" class="gebühr"></h6>
                            </div>
                            <br>
                            <br>

                            <!--Grundpreis-->
                            <div>
                                <h5><span class="underline-text-teal">Grundpreis</span></h5>
                                <div class="values-inline">
                                    <h6>Grundpreis [€]:</h6>
                                    <input id="baseFeeGas" class="input-short center-align" type="number">
                                </div>
                                <div class="values-inline">
                                    <h6>Ø Grundpreis [€] / Tag:</h6>
                                    <h6 id="avgBaseFeeGas" class="bold"></h6>
                                </div>
                                <hr>
                                <div>
                                    <h6>Anteiliger Grundpreis für Abrechnungsperiode:</h6>
                                    <h6 id="feeBaseFeeGas" class="gebühr"></h6>
                                </div>
                            </div>
                            <br>
                            <br>

                            <!--Erdgassteuer-->
                            <div>
                                <h5><span class="underline-text-teal">Erdgassteuer</span></h5>
                                <div class="values-inline">
                                    <h6>Erdgassteuer [€] pro [kWh]:</h6>
                                    <input id="taxPerGas" class="input-short center-align" type="number">
                                </div>
                                <hr>
                                <h6>Erdgassteuergebühr</h6>
                                <h6 id="feeTaxGas" class="gebühr"></h6>
                            </div>
                            <br>
                            <br>

                            <!--Sum of gas costs-->
                            <div>
                                <h5><span class="underline-text-teal">Summe Gaskosten</span></h5>
                                <div class="values-inline">
                                    <h6>Netto Gaskosten:</h6>
                                    <h6 id="netGas" class="bold"></h6>
                                </div>
                                <div class="values-inline">
                                    <h6>Umsatzsteuer 19%:</h6>
                                    <h6 id="taxGas" class="bold"></h6>
                                </div>
                                <hr>
                                <h6>Brutto Gaskosten</h6>
                                <h5 id="grossGas" class="final-gebühr"></h5>
                            </div>

                        </div>
                    </li>
                </ul>
            </div>
            <div class="sidebar-right div-border z-depth-2 center">
                <h6><b><span class="teal-text lighten-2">Kosten</span></b></h6>
                <br>
                <table>
                    <thead>
                        <th>Kostenart</th>
                        <th>Betrag</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Wasser</td>
                            <td id="waterValue" class="tableValue">0</td>
                        </tr>
                        <tr>
                            <td>Strom</td>
                            <td id="powerValue" class="tableValue">0</td>
                        </tr>
                        <tr>
                            <td>Gas</td>
                            <td id="gasValue" class="tableValue">0</td>
                        </tr>
                    </tbody>
                </table>
                <br>
                <hr>
                <h6><b><span class="teal-text lighten-2">Summe</span></b></h6>
                <h6 id="rightBarSum">0</h6>
            </div>

            <!--Floating Action Button-->
            <div class="fixed-action-btn">
                <a class="btn-floating btn-large teal lighten-2 z-depth-2">
                    <i class="large material-icons">menu</i>
                </a>
                <ul>
                    <li>
                        <a href="#modalEmptyForm" id="emptyForm" class="btn-floating floating-acc-btn modal-trigger">
                            <i class="material-icons">delete</i>
                        </a>
                        <a class="btn-floating mobile-fab-tip">Eingaben zurücksetzen</a>
                    </li>
                    <li>
                        <a id="unfoldAllCollapsibleFinance" class="btn-floating floating-acc-btn"><i class="material-icons">unfold_more</i></a>
                        <a class="btn-floating mobile-fab-tip">Alles aufklappen</a>
                    </li>
                    <li>
                        <a id="closeAllCollapsibleFinance" class="btn-floating floating-acc-btn lighten-1"><i class="material-icons">unfold_less</i></a>
                        <a class="btn-floating mobile-fab-tip">Alles schließen</a>
                    </li>
                </ul>
            </div>
        </div>

    </div>

    <!-- Modal Add Entry -->
    <div id="modalAddEntry" class="modal">
        <div class="modal-content">
            <!--Header-->
            <h4>Neuen Zählerstand eintragen</h4>
            <hr>
            <!--Content-->
            <div class="container">
                <label for="type" class="teal-text lighten-2">Typ</label>
                <div class="input-field">
                    <select id="type">
                        <option value="" disabled selected>Wähle deine Option</option>
                        <option value="Wasser">Wasser</option>
                        <option value="Strom">Strom</option>
                        <option value="Gas">Gas</option>
                    </select>
                </div>
                <div class="input-field">
                    <label for="zählernummer" class="teal-text lighten-2">Zählernummer</label>
                    <input id="zählernummer" type="number" min="0">
                </div>
                <div class="input-field">
                    <label for="datum" class="teal-text lighten-2">Datum</label>
                    <input id="datum" type="text" class="datepicker">
                </div>
                <div class="input-field">
                    <label id="verbrauchLabel" for="verbrauch" class="teal-text lighten-2">Verbrauch</label>
                    <input id="verbrauch" type="number" min="0">
                </div>
                <div class="input-field">
                    <label for="preisProEinheit" class="teal-text lighten-2">Preis pro Einheit</label>
                    <input id="preisProEinheit" type="number" min="0">
                </div>
            </div>

        </div>
        <hr style="width:95%;">
        <div class="modal-footer">
            <a id="closeModalEntry" href="#!" class="modal-close waves-effect btn-flat">Abbrechen</a>
            <a id="btnAddEntry" href="#!" class="modal-close waves-effect waves-light btn teal lighten-2">Eintragen</a>
        </div>
    </div>

    <!-- Modal Edit Entry -->
    <div id="modalEditEntry" class="modal">
        <div class="modal-content">
            <!--Header-->
            <h4>Zählerstand verändern</h4>
            <hr>
            <!--Content-->
            <div class="container">
                <label for="type" class="teal-text lighten-2">Typ</label>
                <div class="input-field">
                    <select id="newType">
                        <option value="" disabled selected>Wähle deine Option</option>
                        <option value="Wasser">Wasser</option>
                        <option value="Strom">Strom</option>
                        <option value="Gas">Gas</option>
                    </select>
                </div>
                <label for="newZählernummer" class="teal-text lighten-2">Zählernummer</label>
                <input id="newZählernummer" type="text">
                <label for="newDatum" class="teal-text lighten-2">Datum</label>
                <input id="newDatum" type="text" class="datepicker">
                <label id="newVerbrauchLabel" for="verbrauch" class="teal-text lighten-2">Verbrauch</label>
                <input id="newVerbrauch" type="number" min="0">
                <label for="newPreisProEinheit" class="teal-text lighten-2">Preis pro Einheit</label>
                <input id="newPreisProEinheit" type="number" min="0">
            </div>
            <p id="editIdHolder" style="display:none"></p>
        </div>
        <hr style="width:95%;">
        <div class="modal-footer">
            <a id="closeModalEditEntry" href="#!" class="modal-close waves-effect btn-flat">Abbrechen</a>
            <button id="btnEditEntry" href="#!" class="modal-close waves-effect waves-light btn teal lighten-2">Ändern</button>
        </div>
    </div>

    <!-- Modal Empty Form -->
    <div id="modalEmptyForm" class="modal" style="width:400pt;">
        <div class="modal-content">
            <!--Header-->
            <h4>Sind sie sicher?</h4>
            <hr>
            <!--Content-->
            <h6>Alle Eingaben werden zurückgesetzt</h6>
        </div>
        <hr style="width:90%;">
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect btn-flat">Abbrechen</a>
            <a id="resetForm" href="#!" class="modal-close waves-effect waves-light btn teal lighten-2">Zurücksetzen</a>
        </div>
    </div>

    <!-- Modal Delete table entry -->
    <div id="modalDelEntry" class="modal" style="width:400pt">
        <div class="modal-content">
            <!--Header-->
            <h4>Sind sie sicher?</h4>
            <hr>
            <!--Content-->
            <h6>Dieser Zählereintrag wird gelöscht</h6>
            <p id="delIdHolder" style="display:none"></p>
        </div>
        <hr style="width:90%;">
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect btn-flat">Abbrechen</a>
            <a id="deleteEntry" href="#!" class="modal-close waves-effect waves-light btn red">Löschen</a>
        </div>
    </div>

    <script src="../js/materialize.min.js"></script>
    <script src="../js/db.js"></script>
    <script src="../js/index.js"></script>
    <script src="../js/formHandling.js"></script>
    <script src="../js/charts.js"></script>

</body>

</html>